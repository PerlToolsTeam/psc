<!doctype html>
<html lang="en" class="h-100">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.84.0">
    <title>Perl Steering Council Meetings</title>

    <link rel="canonical" href="https://psc.perlhacks.com/">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
          crossorigin="anonymous">

    <meta name="theme-color" content="#7952b3">

    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }

      main > .container {
        padding: 60px 15px 0;
      }

      th::after {
        content: "⇵";
        font-size: 0.6em;
        position: absolute;
        right: 4px;
        top: 50%;
        transform: translateY(-50%);
        opacity: 0.5;
      }

      th[data-sortable="false"]::after {
        content: "";
      }

      th[data-sort-order="asc"]::after {
        content: "⇧";
      }

      th[data-sort-order="desc"]::after {
        content: "⇩";
      }
    </style>

  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'G-D7392FW29L');
  </script>
    
  </head>
  <body class="d-flex flex-column h-100">
    
    <header>
      <!-- Fixed navbar -->
      <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">Perl Steering Council Meetings</a>
        </div>
      </nav>
    </header>

    <!-- Begin page content -->
    <main class="flex-shrink-0">
      <div class="container">
        <h1 class="mt-5">Perl Steering Council Meetings</h1>
        <p class="lead">This is a list of the Perl Steering Council meetings with links to the minutes.</p>

        <table id="jsonTable" class="table table-striped table-hover">
          <thead>
            <tr>
              <th data-sortable="true" data-sort-order="desc" onclick="sortTable(0)">
                #
                <i class="bi-arrow-down-up sort-icon"></i>
              </th>
              <th data-sortable="true" data-sort-order="asc" onclick="sortTable(1)">
                Date
                <i class="bi-arrow-down-up sort-icon"></i>
              </th>
              <th data-sortable="false">Subject</th>
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
      </div>
    </main>

    <footer class="footer mt-auto py-3 bg-light">
      <div class="container">
        <span class="text-muted">Made by <a href="https://twitter.com/davorg">@davorg</a>
          / Code on <a href="https://github.com/davorg/psc">GitHub</a></span>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
            integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
            crossorigin="anonymous"></script>

    <script>
      async function fetchJSON(url) {
        const response = await fetch(url);
        const data = await response.json();
        return data;
      }

      function createTable(data) {
        const table = document.getElementById('jsonTable').getElementsByTagName('tbody')[0];
        data.forEach(item => {
          const row = table.insertRow();
          row.insertCell().textContent = item.num;
          row.insertCell().textContent = item.date;
          const subjCell = row.insertCell();
          if (item.subj) {
            const subjLink = document.createElement('a');
            subjLink.href = item.url;
            subjLink.textContent = item.subj;
            subjCell.appendChild(subjLink);
          } else {
            subjCell.textContent = item.msg;
          }
        });
      }

      function sortTable(columnIndex) {
        const table = document.getElementById('jsonTable');
        const columnHeader = table.getElementsByTagName('th')[columnIndex];
        if (columnHeader.getAttribute('data-sortable') === 'false') {
          return;
        }

        const sortOrder = columnHeader.getAttribute('data-sort-order');
        columnHeader.setAttribute('data-sort-order', sortOrder === 'asc' ? 'desc' : 'asc');

        // Update sort icons
        const allSortableHeaders = table.querySelectorAll('th[data-sortable="true"]');
        allSortableHeaders.forEach(header => {
          const icon = header.querySelector('.sort-icon');
          icon.classList.remove('bi-arrow-down', 'bi-arrow-up');
          icon.classList.add('bi-arrow-down-up');
        });

        const currentIcon = columnHeader.querySelector('.sort-icon');
        currentIcon.classList.remove('bi-arrow-down-up');
        currentIcon.classList.add(sortOrder === 'asc' ? 'bi-arrow-up' : 'bi-arrow-down');

        const tbody = table.tBodies[0];
        const rows = Array.from(tbody.rows);
        const sortedRows = rows.sort((a, b) => {
          const aText = a.cells[columnIndex].textContent.trim();
          const bText = b.cells[columnIndex].textContent.trim();
          const comparison = aText.localeCompare(bText, undefined, { numeric: true, sensitivity: 'base' });

          return sortOrder === 'asc' ? comparison : -comparison;
        });

        sortedRows.forEach((row, index) => {
          const newRow = tbody.insertRow(index);
          newRow.className = row.className;

          Array.from(row.cells).forEach((cell, cellIndex) => {
            newRow.insertCell(cellIndex).innerHTML = cell.innerHTML;
          });

          tbody.deleteRow(index + 1);
        });
      }

      async function init() {
        const url = '/psc.json';
        const data = await fetchJSON(url);
        createTable(data);
        sortTable(0);
      }

      init();
    </script>
  </body>
</html>
